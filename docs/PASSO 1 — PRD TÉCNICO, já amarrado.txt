**PASSO 1 ‚Äî PRD T√âCNICO**, j√° **amarrado ao motor fiel** que definimos.
Depois disso, fecho com o **PASSO 3 ‚Äî MVP**.

---

# üìÑ PASSO 1 ‚Äî PRD T√âCNICO (BASEADO NO MOTOR REAL)

## 1. Vis√£o do Produto

**Nome (provis√≥rio):** Criador Inteligente
**Tipo:** Web App + PWA
**Objetivo:** Executar c√°lculos alimentares e proje√ß√µes de crescimento de til√°pias **id√™nticos √† planilha original**, com controle de acesso via pagamento.

---

## 2. Escopo Funcional

### 2.1 O que o sistema FAZ

* Replica a l√≥gica da planilha c√©lula por c√©lula
* Calcula:

  * Biomassa
  * Ra√ß√£o di√°ria
  * Ra√ß√£o por trato
  * Ganho de peso
  * Proje√ß√£o semanal
  * Consumo acumulado
  * Custo
* Armazena simula√ß√µes
* Controla acesso por assinatura

### 2.2 O que o sistema N√ÉO faz (por enquanto)

* Sugest√£o autom√°tica de manejo
* Alertas inteligentes
* Integra√ß√£o com sensores
* Multi-esp√©cies

---

## 3. Requisitos N√£o Funcionais (cr√≠ticos)

* C√°lculo determin√≠stico
* Precis√£o num√©rica compat√≠vel com Excel
* Motor versionado
* Resultado nunca muda sem mudan√ßa expl√≠cita de vers√£o
* Lat√™ncia baixa (c√°lculo local)

---

## 4. Arquitetura

### 4.1 Frontend

* Next.js (App Router)
* TypeScript
* Tailwind + Shadcn UI
* PWA habilitado
* C√°lculo executado no frontend (sem custo de infra)

### 4.2 Backend

* Supabase

  * Auth
  * Postgres
  * RLS
  * Edge Functions (webhooks)

---

## 5. Autentica√ß√£o e Acesso

### Fluxo

1. Usu√°rio cria conta
2. Sistema cria registro em `subscriptions`
3. Acesso inicial = **bloqueado**
4. Pagamento confirmado ‚Üí acesso liberado

### Controle

* Middleware no frontend:

```ts
if (!subscription.active) redirect('/paywall')
```

---

## 6. Pagamento

### Estrat√©gia

* Gateway externo (Stripe / Mercado Pago)
* Webhook ‚Üí Supabase Edge Function
* Atualiza status da assinatura

### Tabela `subscriptions`

* id
* user_id
* status (`inactive | active | canceled`)
* plan
* expires_at
* gateway_ref

---

## 7. Modelagem de Dados

### 7.1 `feeding_simulations`

```ts
{
  id,
  user_id,
  engine_version,
  input_json,
  output_json,
  created_at
}
```

### 7.2 `engine_versions`

```ts
{
  version,
  description,
  created_at
}
```

---

## 8. Motor de C√°lculo (Regra Oficial)

* C√≥digo imut√°vel por vers√£o
* Cada simula√ß√£o grava:

  * inputs
  * outputs
  * vers√£o usada

‚ö†Ô∏è **Nunca recalcular dados antigos com motor novo.**

---

## 9. Crit√©rios de Aceite

* Mesmo input ‚Üí mesmo output da planilha
* Diferen√ßa m√°xima: 0,001
* Teste comparativo validado manualmente

---

# ‚úÖ PASSO 1 CONCLU√çDO

Voc√™ agora tem um **PRD t√©cnico real**, n√£o conceitual.
Isso j√° √© suficiente para qualquer ferramenta de IA dev trabalhar sem distorcer a l√≥gica.

---

# üñ•Ô∏è PASSO 3 ‚Äî MVP FUNCIONAL (EXECUT√ÅVEL)

Agora fechamos com o **produto m√≠nimo vi√°vel**, respeitando tudo acima.

---

## 1. Telas do MVP

### Tela 1 ‚Äî Login / Cadastro

* Email
* Senha
* Supabase Auth

---

### Tela 2 ‚Äî Paywall

* Mensagem clara
* Bot√£o ‚ÄúAssinar‚Äù
* Status da assinatura

---

### Tela 3 ‚Äî Formul√°rio de C√°lculo

Campos **id√™nticos √† planilha**:

* Peso m√©dio inicial
* Quantidade de peixes
* Fase (se existir)
* Temperatura (se usada)
* Pre√ßo da ra√ß√£o
* N√∫mero de semanas

---

### Tela 4 ‚Äî Resultado Imediato

* Biomassa
* Ra√ß√£o/dia
* Tratos/dia
* Ra√ß√£o por trato
* Custo di√°rio

---

### Tela 5 ‚Äî Proje√ß√£o

* Tabela semanal
* Peso m√©dio por semana
* Consumo acumulado
* Gr√°fico simples

---

## 2. Fluxo T√©cnico do MVP

```
Login
  ‚Üì
Verifica assinatura
  ‚Üì
Formul√°rio
  ‚Üì
Motor de c√°lculo (local)
  ‚Üì
Exibe resultado
  ‚Üì
Salva simula√ß√£o
```

---

## 3. O que torna esse MVP forte

* J√° √© vend√°vel
* J√° √© confi√°vel
* J√° substitui a planilha
* J√° cria depend√™ncia do usu√°rio
* J√° permite escalar depois

---

# üéØ Recomenda√ß√£o final (honesta)

Voc√™ n√£o est√° criando ‚Äúum app‚Äù.
Voc√™ est√° **empacotando um know-how validado**.



